(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(14),c=a(15),l=a(18),i=a(16),s=a(19),u=a(30),m=a.n(u),d=(o.a.Component,a(5)),h=a(22),g=a(3),p=m.a.create({baseURL:"/"}),f=function(e){return{type:"SET_NOTES",payload:e}},E=function(e){return{type:"ADD_NOTE",payload:e}},b=function(e){return{type:"UPDATE_NOTE",payload:e}},y=function(e){return{type:"DELETE_NOTE",payload:e}},v=a(59);var O=Object(g.b)((function(e){return{notes:e.notes}}))((function(e){var t=function(t){console.log("delete id"+t),e.dispatch(function(e){return function(t){p.delete("/notes/".concat(e),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("after deleting"+e.data._id),t(y(e.data._id))})).catch((function(e){console.log(e)}))}}(t))},a={columns:[{label:"Title",field:"title"},{label:"Actions",field:"actions"}],rows:e.notes.map((function(e){return{title:o.a.createElement(d.b,{to:"/notes/".concat(e._id)},e.title),actions:o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return t(e._id)}},"Remove"))}}))};return o.a.createElement("div",null,o.a.createElement("h1",null,"Notes List-",e.notes.length),o.a.createElement(v.c,{striped:!0,bordered:!0,data:a}),o.a.createElement("label",null,o.a.createElement(d.b,{to:"/notes/new"},"Add Note")))})),j=function(e){return{type:"SET_CATEGORY",payload:e}},N=function(e){return{type:"ADD_CATEGORY",payload:e}},S=function(e){return{type:"UPDATE_CATEGORY",payload:e}};var T=Object(g.b)((function(e){return{categories:e.categories}}))((function(e){var t=function(t){e.dispatch(function(e){return function(t){p.delete("/notes/".concat(e),{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("cat id delete",e.data)})).catch((function(e){console.log(e)}))}}(t))};return o.a.createElement("div",null,o.a.createElement("h1",null,"Categories list-",e.categories.length),o.a.createElement("ul",null,e.categories.map((function(e){return o.a.createElement("li",{key:e._id},o.a.createElement(d.b,{to:"/category/".concat(e._id)},e.name),o.a.createElement("button",{onClick:function(){return t(e._id)}},"Remove"))}))),o.a.createElement("label",null,o.a.createElement(d.b,{to:"/category/new"},"Add Categories")))}));var C=Object(g.b)((function(e,t){var a=t.match.params.id;return{note:e.notes.find((function(e){return e._id==a}))}}))((function(e){return console.log("id",e.match.params.id),o.a.createElement("div",null,e.note?o.a.createElement("div",null,o.a.createElement("h1",null,"Tiltle- ",e.note.title),o.a.createElement("h3",null,"Body-",e.note.body),o.a.createElement("label",null,o.a.createElement(d.b,{to:"/notes/edit/".concat(e.note._id)},"Edit-Notes"))):o.a.createElement("div",null,".....Loading"))}));var _=Object(g.b)((function(e,t){var a=t.match.params.id;return console.log("id is"+a),{category:e.categories.find((function(e){return e._id==a}))}}))((function(e){return o.a.createElement("div",null,e.category?o.a.createElement("div",null,o.a.createElement("h1",null,"Name-",e.category.name),o.a.createElement("label",null,o.a.createElement(d.b,{to:"/category/edit/".concat(e.category._id)},"Edit Category"))):o.a.createElement("h3",null,"...Loading"))})),k=a(17),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={title:a.state.title,body:a.state.body,category:a.state.category};a.props.handleSubmit(t),console.log(t)},a.state={title:e.note?e.note.title:"",body:e.note?e.note.body:"",category:""},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Title"),o.a.createElement("input",{type:"text",placeholder:"Enter Title",name:"title",value:this.state.title,className:"form-control",onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Body"),o.a.createElement("input",{type:"text",placeholder:"Enter body",name:"body",value:this.state.body,className:"form-control",onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("label",null,"Category"),o.a.createElement("select",{name:"category",id:"dropdown",value:this.state.category,onChange:this.handleChange,className:"form-control"},o.a.createElement("option",{key:1,value:1},"select"),this.props.categories.map((function(e){return o.a.createElement("option",{key:e._id,value:e._id},e.name)})))),o.a.createElement("input",{type:"submit",className:"btn btn-primary"}))))}}]),t}(o.a.Component),w=Object(h.e)(Object(g.b)((function(e,t){var a=t.match.params.id;return console.log("id note",a),{categories:e.categories,note:e.notes.find((function(e){return e._id==a}))}}))(x));var A=Object(g.b)()((function(e){return o.a.createElement("div",null,o.a.createElement(w,{handleSubmit:function(t){var a=e.match.params.id;e.dispatch(function(e,t,a){return function(n){p.put("/notes/".concat(e),t,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("update",e.data),n(b(e.data)),a()})).catch((function(e){console.log(e)}))}}(a,t,(function(){return e.history.push("/notes")})))}}))}));var D=Object(g.b)()((function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"Form"),o.a.createElement(w,{handleSubmit:function(t){e.dispatch(function(e,t){return function(a){p.post("/notes",e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("dataNote",e.data),a(E(e.data)),t()})).catch((function(e){console.log(e)}))}}(t,(function(){return e.history.push("/notes")})))}}))})),R=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(l.a)(this,Object(i.a)(t).call(this,e))).handleChange=function(e){a.setState(Object(k.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault();var t={name:a.state.name};a.props.handleSubmit(t),console.log(t)},a.state={name:e.category?e.category.name:""},a}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 "},o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("label",{htmlFor:"cat_name"},"Category"),o.a.createElement("input",{type:"text",id:"cat_name",name:"name",value:this.state.name,onChange:this.handleChange,className:"form-control"})),o.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block"}))))}}]),t}(o.a.Component),I=Object(h.e)(Object(g.b)((function(e,t){var a=t.match.params.id;return{category:e.categories.find((function(e){return e._id==a}))}}))(R));var L=Object(g.b)()((function(e){return o.a.createElement("div",null,o.a.createElement("h1",null,"Add New Category"),o.a.createElement(I,{handleSubmit:function(t){e.dispatch(function(e,t){return function(a){p.post("/categories",e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log(e.data),a(N(e.data)),t()})).catch((function(e){console.log(e)}))}}(t,(function(){return e.history.push("/categories")})))}}))}));var U=Object(g.b)()((function(e){return o.a.createElement("div",null,o.a.createElement("h4",null,"Edit Categories"),o.a.createElement(I,{handleSubmit:function(t){var a=e.match.params.id;console.log("edit",a);e.dispatch(function(e,t,a){return function(n){p.put("/categories/".concat(t),e,{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("catehory"+e.data),n(S(e.data)),a()})).catch((function(e){console.log(e)}))}}(t,a,(function(){return e.history.push("/categories")})))}}))})),Y=a(38),G=a.n(Y),P=function(e){return{type:"SET_USER",payload:e}},B=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).handleChange=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={email:e.state.email,password:e.state.password};console.log("formdata",a),e.props.dispatch(function(e,t){return function(a){p.post("/users/login",e).then((function(e){console.log("login",e.data.error),e.data.hasOwnProperty("error")?alert(e.data.error):(console.log(e.headers["x-auth"]),localStorage.setItem("authToken",e.headers["x-auth"]),console.log("authTokehn is"+e.headers["x-auth"]),p.get("/users/account",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("account data"+JSON.stringify(e.data));var n=e.data;a(P(n)),t()})))})).catch((function(e){console.log(e)}))}}(a,(function(){return e.props.history.push("/notes")})))},e.state={email:"",password:""},e}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement("h1",{className:"text-centre"},"Login"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",placeholder:"Enter Email",name:"email",className:"form-control",onChange:this.handleChange})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"password",placeholder:"Enter Password",className:"form-control",onChange:this.handleChange})),o.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block"}))))}}]),t}(o.a.Component),J=Object(g.b)()(B),F=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).handleChnage=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value))},e.handleSubmit=function(t){t.preventDefault();var a={username:e.state.username,email:e.state.email,password:e.state.password};e.props.dispatch(function(e,t){return function(a){p.post("/users/register",e).then((function(e){if(console.log("register",e.data),e.data.hasOwnProperty("errors")){var a=[];for(var n in e.data.errors)a.push(e.data.errors[n].message);G.a.fire({title:"Error!",text:"".concat(a.join(", ")),icon:"error",confirmButtonText:"Ok"})}else G.a.fire({title:"Success!",text:"You have successfully registered",icon:"success",confirmButtonText:"Ok"}),t()})).catch((function(e){console.log(e)}))}}(a,(function(){return e.props.history.push("/users/login")}))),console.log(a)},e.state={username:"",email:"",password:""},e}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-md-6 offset-md-3"},o.a.createElement("h1",{className:"text-centre"},"Register"),o.a.createElement("form",{onSubmit:this.handleSubmit},o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"username",placeholder:"Enter name",className:"form-control",onChange:this.handleChnage})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"email",placeholder:"Enter email",className:"form-control",onChange:this.handleChnage})),o.a.createElement("div",{className:"form-group"},o.a.createElement("input",{type:"text",name:"password",placeholder:"Enter password",className:"form-control",onChange:this.handleChnage})),o.a.createElement("input",{type:"submit",className:"btn btn-primary btn-block"}))))}}]),t}(o.a.Component),M=Object(g.b)()(F);var V=Object(g.b)((function(e){return{user:e.user}}))((function(e){var t=function(){e.dispatch((function(e){p.delete("/users/logout",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(e){console.log("remove"+e.data)}))}))};return o.a.createElement(d.a,null,o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"Notes-App"),0==Object.keys(e.user).length?o.a.createElement("div",null,o.a.createElement("h2",null,o.a.createElement(d.b,{to:"/users/login"},"Login"),"||",o.a.createElement(d.b,{to:"/users/register"},"Register"))):o.a.createElement("div",null,o.a.createElement("h2",null,o.a.createElement(d.b,{to:"#",onClick:function(){t()}},"Logout"),"||",o.a.createElement("label",null,o.a.createElement(d.b,{to:"/notes"},"Notes")),"||",o.a.createElement("label",null,o.a.createElement(d.b,{to:"/categories"},"Categories")))),o.a.createElement(h.a,{path:"/users/login",component:J}),o.a.createElement(h.a,{path:"/users/register",component:M}),o.a.createElement(h.a,{path:"/notes",component:O,exact:!0}),o.a.createElement(h.a,{path:"/notes/:id",component:C}),o.a.createElement(h.a,{path:"/categories",component:T}),o.a.createElement(h.a,{path:"/notes/edit/:id",component:A}),o.a.createElement(h.a,{path:"/category/:id",component:_}),o.a.createElement(h.a,{path:"/notes/new",component:D}),o.a.createElement(h.a,{path:"/category/edit/:id",component:U}),o.a.createElement(h.a,{path:"/category/new",component:L,exact:!0})))})),q=a(13),z=a.n(q),H=a(25),K=a(21),Q=a(23),W=[],X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_NOTES":return Object(Q.a)(t.payload);case"ADD_NOTE":return[].concat(Object(Q.a)(e),[t.payload]);case"UPDATE_NOTE":return e.map((function(a){return a._id==t.payload._id?Object(K.a)({},e,{},t.payload):Object(K.a)({},e)}));case"DELETE_NOTE":return e.filter((function(e){return e._id!=t.payload._id}));default:return Object(Q.a)(e)}},Z=[],$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CATEGORY":return Object(Q.a)(t.payload);case"ADD_CATEGORY":return[].concat(Object(Q.a)(e),[t.payload]);case"UPDATE_CATEGORY":return e.map((function(e){return e._id==t.payload._id?Object(K.a)({},e,{},t.payload):Object(K.a)({},e)}));case"DELETE_CATEGORY":return e.filter((function(e){return e._id!=t.payload}));default:return Object(Q.a)(e)}},ee=a(58),te={},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(K.a)({},t.payload);case"REMOVE_USER":return te;default:return Object(K.a)({},e)}},ne=function(){return Object(H.d)(Object(H.c)({notes:X,categories:$,user:ae}),Object(H.a)(ee.a))},oe=(a(105),ne());oe.subscribe((function(){console.log(oe.getState())})),oe.dispatch((function(e){p.get("/notes",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){console.log("authTok",localStorage.getItem("authToken")),console.log(t.data),e(f(t.data))})).catch((function(e){console.log(e)}))})),oe.dispatch((function(e){p.get("/categories",{headers:{"x-auth":localStorage.getItem("authToken")}}).then((function(t){console.log("authTokcat",localStorage.getItem("authToken")),console.log(t.data),e(j(t.data))})).catch((function(e){console.log(e)}))})),console.log(oe.getState());var re=o.a.createElement(g.a,{store:oe},o.a.createElement(V,null));z.a.render(re,document.getElementById("root"))},60:function(e,t,a){e.exports=a(106)}},[[60,1,2]]]);
//# sourceMappingURL=main.151b8c7d.chunk.js.map